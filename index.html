<html>
<head>
  <meta charset="utf-8">
  <title>Chess LJ.</title>
  <style>
    * {
      list-style: none;
    }
    li {
      width: 45px;
      height: 45px;
      margin: 2px;
    }
    .active {
      background-image: url(knight.png);
      background-size: cover;
    }
    .possible {
      background-image: url(knight-wh.png);
      background-size: cover;
    }
  </style>
</head>
<body>
  <div id="board"></div>
</body>
<script>

  // chessboard
  var xLine = ["A", "B", "C", "D", "E", "F", "G", "H"];
  var yLine = ["1", "2", "3", "4", "5", "6", "7", "8"];

  // function to create the chessboard
  function drawBoard(x, y) {
    // the board form the html-file
    var chessBoard = document.getElementById("board");
    var xLine = x;
    var yLine = y;

    console.log(xLine)

    for (var i = 0; i < 8; i++) {
    var chessRow = document.createElement("ul");
    chessRow.style.clear = "left";

      for (var j = 0; j < 8; j++) {
        var chessCell = document.createElement("li");
        chessCell.style.float = "left";
        chessCell.setAttribute("id", xLine[j] + yLine[i])
        if (i%2 ==0) {
          if (j%2 == 0) {
            chessCell.style.backgroundColor = "Sienna";
          }
          else {
            chessCell.style.backgroundColor = "Tan";
          }
        }
        else {
          if (j%2 == 0) {
            chessCell.style.backgroundColor = "Tan";
          }
          else {
            chessCell.style.backgroundColor = "Sienna";
          }
        }
        chessRow.appendChild(chessCell)
      }
    chessBoard.appendChild(chessRow)
    }
  };

  drawBoard(xLine, yLine);

  // the first/current position of the knight
  var firstPosition = "B3";

  // calling the function
  moveKnight(firstPosition, xLine, yLine);

  function moveKnight(firstPosition, x, y) {
    // putting the knight on the board
    var knight = document.getElementById(firstPosition).setAttribute("class", "active");

    var xLine = x;
    var yLine = y;

    var x = firstPosition.split("");
    var first = xLine.indexOf(x[0])
    var second = yLine.indexOf(x[1])

    var knight = [];

    knight.push(first, second);

    if (knight.length > 2) {
      alert("Too many arguments.")
      return;
    }

    // possible moves
    var moves = [
      { x: +1, y: -2 },
      { x: +1, y: +2 },
      { x: +2, y: -1 },
      { x: +2, y: +1 },
      { x: -2, y: -1 },
      { x: -2, y: +1 },
      { x: -1, y: -2 },
      { x: -1, y: +2 }
    ];

    // new array for storing possible new positions
    var newPositions = [];

    // take the current position and creates the new ones
    for (var i = 0; i < moves.length; i++) {
      var move = moves[i];
      var position = {}; // object to push into the newPositions-array
      position.x = knight[0] + move.x;
      position.y = knight[1] + move.y;
      newPositions.push(position)
    }

    // check if new position is on the board/is valid
    var okPositions = [];

    for (var i = 0; i < newPositions.length; i++) {
      var check = newPositions[i];
      if (check.x < 0 || check.y < 0) {
      }
      else if (check.x > 7 || check.y > 7) {
      }
      else {
        okPositions.push(check)
      }
    }

    for (var i = 0; i < okPositions.length; i++) {
      var possPos = xLine[okPositions[i].x] + yLine[okPositions[i].y];
      var knight = document.getElementById(possPos).setAttribute("class", "possible");
    }

    // give the user the new possible positions
    var result = "Possible new positions are: ";

    for (var i = 0; i < okPositions.length; i++) {
      result += xLine[okPositions[i].x];
      result += yLine[okPositions[i].y] + " ";
    }
    console.log(result)
    return result;
  }; // end of function


</script>
<html>
